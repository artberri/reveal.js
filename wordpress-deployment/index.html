<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>reveal.js â€“ The HTML Presentation Framework</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


		<link href='https://fonts.googleapis.com/css?family=Oswald:400,700|Libre+Baskerville' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="../css/reveal.css">
		<link rel="stylesheet" href="../css/theme/black.css" id="theme">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="../lib/css/zenburn.css">
		<link rel="stylesheet" href="style.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section id="home" data-background="images/home.jpg">
					<h1><span id="deploying">Deploying</span> <br><span class="wordpress"><span class="word">Word</span><span class="press">Press</span></span> <br><span id="likeapro">Like&nbsp;a&nbsp;Pro</span></h1>
					<p id="byauthor">
						By <a href="http://www.berriart.com/">Alberto Varela</a>
					</p>
				</section>

				<section>
					<h2>Who I am?</h2>
					<p>
						ToDo.
					</p>
				</section>

				<section>
					<h2 class="mini">Websites <span>VS</span> Professional Websites</h2>
					<br>
					<div>
						<img class=" fragment" width="440" data-src="images/suzanne.png" alt="Done stamp" >
						<img class=" fragment" width="440" data-src="images/10up.png" alt="Done stamp" >
					</div>
				</section>

				<section>
					<h2 class="mini">Deployments <span>VS</span> Professional Deployments</h2>
					<br>
					<div >
						<img class=" fragment" width="440" data-src="images/minion2.gif" alt="Done stamp" >
						<img class=" fragment" width="440" data-src="images/minion3.gif">
					</div>
				</section>

				<section>
					<h2>How?</h2>
				</section>

				<section>
					<section>
						<h2>The first 'Dogma'</h2>
						<h3>The developers are the only responsibles of the code</h3>
					</section>
					<section>
						<h2 class="mini">People that should not upload code:</h2>
						<ul>
							<li class="fragment">The client</li>
							<li class="fragment">The marketing department</li>
							<li class="fragment">The CEO / The boss</li>
							<li class="fragment">Matt Mullenweg</li>
						</ul>
					</section>
					<section>
						<h2 class="mini">wp-config.php</h2>
						<p>You should disallow modifications from the admin panel.</p>
						<pre><code class="hljs" data-trim contenteditable>
&lt;?php

// Disable the Plugin and Theme Editor
define( 'DISALLOW_FILE_EDIT', true );
// Disable Plugin and Theme Update and Installation
define( 'DISALLOW_FILE_MODS', true );
// Disable All Automatic Updates
define( 'AUTOMATIC_UPDATER_DISABLED', true );

						</code></pre>
						<p><small>You can find more info about configuration constants in the <a href="https://codex.wordpress.org/Editing_wp-config.php">Wordpress Codex</a>.</small></p>
					</section>
					<section>
						<h2 class="mini">Version Control System</h2>
						<h3>Git</h3>
						<p>Self hosted, Github, Bitbucket, Gitlab, VSO...</p>
						<h3>Subversion</h3>
						<p>No Pull Requests :(</p>
					</section>
					<section>
						<h2 class="mini">Managing dependencies</h2>
						<h3><a href="https://getcomposer.org/">Composer</a> + <a href="https://wpackagist.org/">WPackagist</a></h3>
						<pre><code class="hljs" data-trim contenteditable>
# composer.json
{
    "name": "mycompany/brilliant-wordpress-site",
    "repositories":[
        {
            "type":"composer",
            "url":"https://wpackagist.org"
        }
    ],
    "require": {
        "php": ">=5.4",
        "johnpbloch/wordpress": "^4.5",
        "wpackagist-plugin/wordpress-seo": "^3.2",
        "wpackagist-plugin/mailchimp-for-wp": "^3.1",
        "wpackagist-theme/yourparenttheme": "^1.3",
    },
    "autoload": {
        "psr-0": {
            "Acme": "src/"
        }
    }
}
						</code></pre>
						<p><small><a href="https://wp-cli.org/">WP-CLI</a> could be another option to manage dependencies.</small></p>
					</section>
					<section>
						<h2 class="mini">Your code: Themes &amp; Plugins</h2>
						<ul>
							<li>All your code should be organized in Themes &amp; Plugins, and it's the only code that
							should be in the source control.</li>
							<li>Don't modify any dependency. Not plugins, neither themes. Use hooks, actions and child themes to override them.</li>
						</ul>
					</section>
					<section>
						<h2 class="mini">Branching and pull requests</h2>
						<ul>
							<li><a href="https://www.atlassian.com/git/tutorials/comparing-workflows">Git workflows</a>: Centralized, Feature Branch, Gitflow, Forking Workflow...</li>
							<li>A <a href="http://tech.veinteractive.com/the-code-review-process.html">list of rules</a> to apply to enhance your code review process.</li>
						</ul>
					</section>
					<section data-background="images/minions5.jpg">
						<h1>Let's<br> make a<br> Pull<br> Request!</h1>
					</section>

				</section>

				<section>
					<section>
						<h2>The second 'Dogma'</h2>
						<h3>There is not any manual step in the deployment process</h3>
					</section>
					<section>
						<h2 class="mini">No more "Works on my machine"</h2>
						<ul>
							<li class="fragment">Make clear you definition of done.</li>
							<li class="fragment">Replicate your production environment: <a href="https://www.vagrantup.com/">Vagrant</a>, <a href="https://www.docker.com/">Docker</a>, <a href="https://puppet.com/">Puppet</a>, <a href="https://www.chef.io/">Chef</a>,...</li>
							<li class="fragment">Create staging environments</li>
						</ul>
					</section>
					<section>
						<h2 class="mini">Deployment Tools / Task Runners</h2>
						<ul>
							<li>PHP tools: <a href="http://deployer.org/">Deployer</a>, <a href="http://magephp.com/">Magallanes</a>, <a href="https://www.phing.info/">Phing</a>, ...</li>
							<li>Other tools: <a href="http://gruntjs.com/">Grunt</a>, <a href="http://gulpjs.com/">Gulp</a>, <a href="http://ant.apache.org/">Ant</a>, ...</li>
						</ul>
					</section>
					<section>
						<h2 class="mini">Example with Deployer</h2>

						<p>Install it with <em>composer</em>:</p>

						<pre><code class="hljs" data-trim contenteditable>
composer require --dev deployer/deployer
composer require --dev "deployphp/recipes
						</code></pre>

						<p>Your <em>composer.json</em> should include now a reference to the dependencies:</p>

						<pre><code class="hljs" data-trim contenteditable>
# composer.json
# ...
    "require-dev": {
        "deployer/deployer": "^3.2",
        "deployphp/recipes": "^3.1",
    },
# ...
						</code></pre>
					</section>
					<section>
						<h2 class="mini">Example with Deployer</h2>

						<p>Configure your deploy steps in the <em>deploy.php</em> file:</p>

						<pre><code class="hljs" data-trim contenteditable>
&lt;?php
// deploy.php
require 'recipe/common.php';
require 'vendor/deployphp/recipes/recipes/configure.php';
require 'vendor/deployphp/recipes/recipes/rsync.php';

set('shared_dirs', [
    'wp-content/uploads',
    'wp-content/cache',
]);
set('shared_files', [
    'wp-config.php',
]);
set('writable_use_sudo', false);
set('http_user', 'deploy');
env('rsync_src', __DIR__ . '/src');
set('rsync', [
    'exclude' => [
        'wp-content/upgrade',
        'wp-content/cache',
        'wp-config.php',
        'wp-content/uploads',
    ],
]);
set('keep_releases', 5);

task('deploy', [
  'deploy:prepare',
  'deploy:release',
  'deploy:configure',
  'rsync',
  'deploy:shared',
  'deploy:symlink',
  'cleanup',
])->desc('Deploy project');
after('deploy', 'success');

serverList(__DIR__ . '/servers.yml');
						</code></pre>
					</section>
					<section>
						<h2 class="mini">Example with Deployer</h2>

						<p>Configure your deployment credentials and servers in the <em>servers.yml</em> file:</p>

						<pre><code class="hljs" data-trim contenteditable>
# servers.yml
staging:
  host: staging.sinrumbofijo.com
  user: deploy
  identity_file:
    public_key:  deploy_rsa.pub
    private_key: deploy_rsa
    password:    ''
  stage: staging
  deploy_path: /home/www/staging.sinrumbofijo.com
  app:
    url: http://staging.sinrumbofijo.com
    root: /home/www/staging.sinrumbofijo.com/current
    db:
      name: 'staging_database_name'
      user: 'staging_database_user'
      pass: 'staging_database_pass'
      host: 'staging_database_host'
    secret:
      auth_key: 'write a better secret here'
      secure_auth_key: 'write a better secret here'
      logged_in_key: 'write a better secret here'
      nonce_key: 'write a better secret here'
      auth_salt: 'write a better secret here'
      secure_auth_salt: 'write a better secret here'
      logged_in_salt: 'write a better secret here'
      nonce_salt: 'write a better secret here'

production:
  host: www.sinrumbofijo.com
  user: deploy
  identity_file:
    public_key:  deploy_rsa.pub
    private_key: deploy_rsa
    password:    ''
  stage: staging
  deploy_path: /home/www/www.sinrumbofijo.com
  app:
    url: http://www.sinrumbofijo.com
    root: /home/www/www.sinrumbofijo.com/current
    db:
      name: 'production_database_name'
      user: 'production_database_user'
      pass: 'production_database_pass'
      host: 'production_database_host'
    secret:
      auth_key: 'write a better secret here'
      secure_auth_key: 'write a better secret here'
      logged_in_key: 'write a better secret here'
      nonce_key: 'write a better secret here'
      auth_salt: 'write a better secret here'
      secure_auth_salt: 'write a better secret here'
      logged_in_salt: 'write a better secret here'
      nonce_salt: 'write a better secret here'

						</code></pre>
					</section>
					<section>
						<h2 class="mini">Example with Deployer</h2>

						<p>And now, deploy is as simple as:</p>

						<pre><code class="hljs" data-trim contenteditable>
./vendor/bin/dep deploy staging
						</code></pre>
						<pre><code class="hljs" data-trim contenteditable>
./vendor/bin/dep deploy production
						</code></pre>
					</section>
					<section>
						<h2 class="mini">Continous Integration Tools</h2>
						<div class="fragment">
							<img data-src="images/ci.png" >

							<p><small>You can see a detailed comparison in <a href="http://stackshare.io/continuous-integration">Stackshare</a>.</small></p>
						</div>
					</section>
					<section>
						<h2 class="mini">Example with Snap.CI</h2>
						<p><small>Sin Rumbo Fijo.</small></p>
					</section>

					<section data-background="images/minions6.jpg">
						<h1>So...<br> Would you<br> dare to<br> make a deploy<br> right now?</h1>
					</section>

				</section>

				<section>
					<section>
						<h2>An step further</h2>
						<h3>There is not any manual step in the QA / Test process</h3>
					</section>
					<section>
						<h2>Linting</h2>
					</section>
					<section>
						<h2>Unit Testing</h2>
					</section>
					<section>
						<h2>Functional Testing</h2>
					</section>
				</section>

				<section>
					<h2 class="mini">Continous Delivery <br><span>VS</span><br> Continous deployment</h2>
					<img data-src="images/continuous-delivery-deployment-sm.jpg" >

					<p><small>Take a look to <a href="https://puppet.com/blog/continuous-delivery-vs-continuous-deployment-what-s-diff">this post</a> for more info.</small></p>
				</section>

				<section>
					<h2 class="mini">Full Sample</h2>
					<p>Sin Rumbo Fijo</p>
				</section>

				<section>
					<h2 class="mini">Thank you</h2>
					<p>Sin Rumbo Fijo</p>
				</section>
			</div>

		</div>

		<script src="../lib/js/head.min.js"></script>
		<script src="../js/reveal.js"></script>

		<script>

			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: '../plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: '../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: '../plugin/zoom-js/zoom.js', async: true },
					{ src: '../plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
