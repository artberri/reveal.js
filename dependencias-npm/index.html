<!doctype html>
<html lang="en" class="npm">

<head>
    <meta charset="utf-8">

    <title>Depende, ¿de qué depende?</title>

    <meta name="description" content="Depende, ¿de qué depende? - 10 claves en la gestión de dependencias en Node.js">
    <meta name="author" content="Alberto Varela">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">


    <link href='https://fonts.googleapis.com/css?family=Abel|Inconsolata' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../dist/reveal.css">
    <link rel="stylesheet" href="../dist/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <!--<link rel="stylesheet" href="../plugin/highlight/zenburn.css">-->
    <link rel="stylesheet" href="highlight-solarized-light.css">
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <div class="reveal">

        <!-- Any section element inside of this container is displayed as a slide -->
        <div class="slides">
            <section id="home" data-background="images/1_21aArwV2_zdkduap5yeXPw.png" data-background-color="#000000"
                data-state="">
                <div id="home-inner">
                    <h1>Depende, ¿de qué depende?</nobr>
                    </h1>
                    <h2>10 claves en la gestión de dependencias<br> con Javascript</h2>
                    <p id="byauthor">
                        Por <span style="text-decoration: line-through">Pau Donés</span>
                        <a href="https://www.berriart.com/">Alberto Varela</a>
                    </p>
                </div>
            </section>

            <section>
                <h2 class="mini">¿Quién soy?</h2>
                <div class=" fragment">
                    <p>Soy
                        <a href="https://www.berriart.com">Alberto Varela</a> y trabajo
                        <br>como desarrollador en </p>
                    <p>
                        <a href="https://www.genial.ly/">
                            <img class="noborder" width="240" src="./images/logo-genially-black.svg" />
                        </a>
                    </p>
                    <p class=" fragment">
                        <small style="color:#666;">
                            <a style="color:#666;" href="https://github.com/artberri">github.com/artberri</a> |
                            <a style="color:#666;" href="https://twiter.com/artberri">twiter.com/artberri</a> |
                            <a style="color:#666;" href="https://www.berriart.com">berriart.com</a> |
                            <a style="color:#666;" href="mailto:alberto@berriart.com">alberto@berriart.com</a>
                        </small>
                    </p>
                </div>
            </section>

            <!--<section>
                <div>
                    <img src="images/depmanagement.png">
                </div>
            </section>-->

            <section>
                <div style="width: 100%; max-width: 600px; margin:auto;display: block;">
                    <blockquote class="twitter-tweet" data-lang="es"><p lang="en" dir="ltr">1/3 of US bandwidth is used by Netflix...<br><br>the rest is used by `rm -rf node_modules &amp;&amp; npm install`</p>&mdash; I Am Devloper (@iamdevloper) <a href="https://twitter.com/iamdevloper/status/908335750797766656?ref_src=twsrc%5Etfw">14 de septiembre de 2017</a></blockquote>
                    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
            </section>

            <section>
                <div class="flex">

                    <img src="images/lisa.png" style="max-width: 30%; max-height: 100%; margin-right: 5%;">
                    <div>
                        <h3 class="r-fit-text">UN POCO</h3>
                        <h3 class="r-fit-text">DE HISTORIA</h3>
                    </div>

                </div>

            </section>

            <section>
                <h2 class="mini">Primeros pasos</h2>
                <ul>
                    <li class="">Prehistoria - <strong>README (con suerte)</strong>
                        <br>Servidores FTP, listas de correo,... </li>
                    <li class="">1984 - <strong>./configure + make</strong>
                        <br>El primer programa que se distribuyó con un script 'configure' fue <a href="https://en.wikipedia.org/wiki/Rn_(newsreader)">rn</a>
                        por Larry Wall.</li>
                    <li class="">1991 - <strong>Autoconf</strong>
                        <br>Validaba dependencias en base a características no a números de versión, creado por David
                        Mackenzie.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Introduciendo los repositorios</h2>
                <ul>
                    <li class="">1993 - <strong>dpkg</strong>
                        <br>Aún utilizado por distribuciones Debian, por Ian Jackson.</li>
                    <li class="">1997 - <strong>rpm</strong>
                        <br>Aún utilizado por distribuciones basadas en Red Hat, por Erik Troan y Marc Ewing.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Específicos de lenguaje</h2>
                <ul>
                    <li class="">1995 - <strong>CPAN</strong>
                        <br>Creado por los miembros de la lista de correo <a href="http://cpan.io/ref/cpan/history.html">perl-packrats</a>
                        para gestionar módulos de Perl.</li>
                    <li class="">1999 - <strong>PEAR</strong>
                        <br>Primer gestor de paquetes de PHP, por Stig S. Bakken. Activo pero en desuso.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Entornos y fichero de requerimientos</h2>
                <ul>
                    <li class="">2007 - <strong>Virtualenv</strong>
                        <br>No es un gestor de paquetes, pero solucionó el problema de desarrollar varias aplicaciones
                        que requieren de diferentes versiones en Python. Por Ian Bicking.</li>
                    <li class="">2008 - <strong>Pip</strong>
                        <br>Vino a sustituir el <em>easy_install</em> de Python, introdujo el fichero
                        'requirements.txt' que sirve para listar las dependencias de una aplicación, también por Ian
                        Bicking.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">El fichero de 'lock'</h2>
                <ul>
                    <li class="">2010 - <strong>Bundler</strong>
                        <br>Yehuda Katz <a href="https://yehudakatz.com/2010/02/01/bundler-0-9-heading-toward-1-0/">introduce
                            el concepto de Gemfile.lock</a> en el
                        nuevo gestor de paquetes que está desarrollando para Ruby.</li>
                    <li class="">2012 - <strong>Composer</strong>
                        <br>Revolucionó la gestión de dependencias junto con Packagist en el mundo PHP. Incluye
                        lockfile y diferenciación entre dependencias de desarrollo y runtime. Por Nils Adermann and
                        Jordi Boggiano.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Versionado semántico</h2>
                <ul>
                    <li class="">2011 - <strong>Semver</strong>
                        <br>
                        A pesar de que no era un método nuevo, fue Tom Preston-Werner, creador de Gravatars y
                        cofundador de GitHub quien redactó la primera especificación de Semver intentando poner algo de
                        orden en lo que ya era considerado el "dependency hell".</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Dependencias Javascript</h2>
                <ul>
                    <li class="">2012 - <strong>Bower</strong>
                        <br>Twitter presenta y libera su gestor de dependencias para el mundo web. Bower <a href="https://github.com/bower/bower/issues/2298">se
                            declaró obsoleto en 2016</a> recomendando el uso de npm o yarn.</li>
                    <li class="">2014 - <strong>npm</strong>
                        <br>El gestor de dependencias de javascript por excelencia, nació de una idea de Isaac
                        Schlueter <a href="https://groups.google.com/forum/?hl=en#!topic/nodejs/erDWyS4xPw8">de 2009</a>,
                        quien sigue como CPO en npm, inc. a día de hoy.</li>
                    <li class="">2016 - <strong>yarn</strong>
                        <br>Suplía ciertas carencias de npm que ya se encontraban en gestores de dependencias de otros
                        lenguajes.</li>
                </ul>
            </section>

            <section>
                <div>
                    <h2 class="mini">Dependency Pokemons</h2>
                    <img src="images/logos.png" width="600">
                </div>
            </section>

            <section>
                <div>
                    <h2 class="mini"><span class="npm">NPM</span> <span class="yarn">Yarn</span> ¡te elijo a ti!</h2>
                    <img class="noborder npm" style="max-width: 500px;max-height: 200px;" src="images/Npm-logo.svg">
                    <img class="noborder yarn" style="max-width: 500px;max-height: 200px;" src="images/yarn.svg">
                    <div class="fragment">¿Cómo aplican estos conceptos a <span class="npm">NPM</span> <span class="yarn">Yarn</span>?</div>
                </div>
            </section>

            <section>
                <h2 class="mini">Conceptos: Repositorio</h2>
                <ul>
                    <li class="">El repositorio central y público 'oficial' es el <a href="https://www.npmjs.com/">
                            Npm Registry</a> (también usando Yarn). Es gestionado por npm, inc. y da servicio gratuíto para
                        paquetes públicos.</li>
                    <li class="">Puedes crear tu propio servidor para que actue como repositorio e incluso como
                        repositorio proxy o contratarlo a un tercero.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Conceptos: Paquete</h2>
                <ul>
                    <li class="">Un paquete npm es uno o varios ficheros comprimidos en un .tgz entre los que
                        se incluye un fichero package.json con la definición de dependencias y otros datos.</li>
                    <li class="">Un repositorio git o un directorio que incluya un fichero package.json también
                        pueden ser considerados paquetes al poder ser referenciados como dependencias.</li>
                    <li class="">Un paquete de npm no tiene por qué contener ficheros javascript. Existen
                        módulos que por ejemplo solo incluyen ficheros CSS.</li>
                    <li class="">Un paquete de npm es inmutable.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Conceptos: Lista de dependencias</h2>
                <ul>
                    <li class="">El fichero <strong>package.json</strong> es el standard para la declaración de
                        dependencias 'locales'.</li>
                    <li class="">Podemos definir diferentes tipos de dependencias: runtime, development, peer,
                        optionals, bundled.</li>
                    <li class="">Podemos especificar versiones concretas o rangos.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Conceptos: El fichero lock</h2>
                <ul>
                    <li class="">El fichero <strong>package-lock.json </strong> (yarn.lock,...) aporta
                        estabilidad a los proyectos y delara las dependencias de forma determinista.</li>
                    <li class="">Se trata de un fichero autogenerado que no se debería editar manualmente.</li>
                    <li class="">Fue el gestor de paquetes yarn el primero que introdujo este concepto en el
                        mundo node.js.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Conceptos: La interfaz de consola (CLI)</h2>
                <ul>
                    <li class=""><strong>npm</strong> es el gestor de paquetes por defecto de node.js y viene
                        incluido en la instalación.</li>
                    <li class="">Existen otras herramientas de consola (yarn, pnpm, tink,...) pero todas ellas
                        usan NPM Registry como repositorio por defecto.</li>
                </ul>
            </section>

            <section>
                <div>
                    <img src="images/hell1.jpg">
                </div>
            </section>

            <section>
                <h2>Las claves</h2>
                <div>
                    <img src="images/clever.gif">
                </div>
            </section>

            <section>
                <h2 class="mini">Clave 1: Utiliza <span class="em">scoped packages</span></h2>
                <ul class="">
                    <li>🐧 Te permite usar nombres reconocibles</li>
                    <li>🤚 Nadie más puede publicar bajo ese nombre</li>
                    <li>🔗 Puedes asociar un scope con un registry diferente</li>
                </ul>
            </section>

            <section>
                <p class="mini">Se hace utilizando de nombre: @org/project</p>
                <pre>
                    <code class="hljs" data-trim>
                        @acme/myapp
                    </code>
                </pre>
                <p class="mini">Se instala como cualquier otro paquete</p>
                <pre>
                    <code class="hljs" data-trim>
                        npm install @acme/myapp
                    </code>
                </pre>
                <pre>
                    <code class="hljs" data-trim>
                        "dependencies": {
                            "@acme/myapp": "^1.3.0"
                        }
                    </code>
                </pre>
                <p class="mini">Puedes apuntar todo el scope a un registro propio (<span class="npm">.npmrc</span> <span class="yarn">.yarnrc.yml</span>)</p>
                <pre class="npm">
                    <code class=" hljs" data-trim>
                        npm config set @acme:registry http://registry.acme.com
                    </code>
                </pre>
                <pre class="yarn">

                    <code class=" hljs" data-trim>
                        yarn config set npmScopes.acme.npmRegistryServer "http://registry.acme.com"
                    </code>
                </pre>
            </section>

            <section>
                <h2 class="mini">Clave 2: Haz <span class="em">dependencias explícitas</span></h2>
                <ul class="">
                    <li>📊 Hay un 99% de probabilidades de que un paquete no deba ser instalado como global, si lo haces
                        deja de ser una dependencia explícita</li>
                    <li>✂️ No copies y 📋 pegues ciegamente de los README</li>
                    <li>🔧 Sí, las herramientas de desarrollo también deben ser dependencias explícitas.</li>
                </ul>
            </section>

            <section>
                <p class="mini">Ejemplo de mal "Getting started": <a href="https://palantir.github.io/tslint/">tslint</a></p>
                <pre class="npm">
                    <code class="hljs" data-trim>
                        npm install --global tslint typescript
                    </code>
                </pre>
                <pre class="yarn">
                    <code class="hljs" data-trim>
                        yarn global add tslint typescript
                    </code>
                </pre>
                <p class="mini">Simplifican para poder ejecutar tslint directamente en consola</p>
                <pre>
                    <code class="hljs" data-trim>
                        tslint --init
                        tslint -c tslint.json 'src/**/*.ts'
                    </code>
                </pre>
                <p class="mini">Pero esto es un problema porque dependiendo del momento de la instalación cada
                    desarrollador o nuestra máquina de CI podrá tener una versión diferente. </p>
            </section>

            <section>
                <p class="mini">Deberíamos añadir esas dependencias como desarrollo. </p>
                <pre class="npm">
                    <code class="hljs" data-trim>
                        npm install --save-dev eslint typescript
                    </code>
                </pre>
                <pre class="yarn">
                    <code class="hljs" data-trim>
                        yarn add -D eslint typescript
                    </code>
                </pre>
                <p class="mini">Y ejecutar la versión local</p>
                <pre>
                    <code class="hljs" data-trim>
                        ./node_modules/.bin/eslint ...
                    </code>
                </pre>
                <p class="mini">O también podemos añadirlo como script npm</p>
                <pre>
                    <code class="hljs" data-trim>
                        "scripts": {
                            "lint": "eslint src"
                        }
                    </code>
                    <code class="hljs npm" data-trim>
                        npm run lint
                    </code>
                    <code class="hljs yarn" data-trim>
                        yarn run lint
                    </code>
                </pre>
            </section>

            <section>
                <h2 class="mini">Clave 3: Haz <span class="em">explícita tu versión de node</span></h2>
                <ul class="">
                    <li>👉 Se debería hacer explícita la compatibilidad con node</li>
                    <li>⚙  Y si fuese necesario la versión de <pre class="npm inline">npm</pre> <pre class="yarn inline">yarn</pre></li>
                    <li class="yarn">⚒ U otras deps de <pre class="inline">process.versions</pre></li>
                    <li>💻 O un sistema operativo o arquitectura concreta</li>
                </ul>
                <pre>
                    <code class="hljs npm" data-trim>
                        "engines": {
                            "node": "&gt;=10 &lt;14",
                            "npm": "&gt;=7"
                        }
                    </code>
                    <code class="hljs yarn" data-trim>
                        "engines": {
                            "node": "&gt;=10 &lt;14",
                            "yarn": "^2.0.0",
                            "zlib": "^1.2.8"
                        }
                    </code>
                </pre>
            </section>

            <section>
                <h2 class="mini">Clave 4: Elije bien el <span class="em">tipo de dependencia </span></h2>
                <dl class="">
                    <dt>dependencies</dt>
                    <dd>Usadas en run time, se instalan siempre.</dd>

                    <dt>devDependencies</dt>
                    <dd>Se instalan solo con <pre class="inline npm">npm install</pre> <pre class="inline yarn">yarn install</pre>.</dd>
                    <dd>NO se instalan con <pre class="inline npm">npm install --production</pre> <pre class="inline yarn">yarn install --production</pre> .</dd>
                    <dd>NO se instalan cuando te usan como dependencia.</dd>

                    <dt>peerDependencies</dt>
                    <dd>NO se instalan automáticamente.</dd>
                    <dd>Se suelen usar en plugins para referenciar al 'host'.</dd>
                </dl>
            </section>

            <section>
                <h2 class="mini">Clave 4: Elije bien el <span class="em">tipo de dependencia </span></h2>
                <dl class="">
                    <dt>optionalDependencies</dt>
                    <dd>Se instalan como una dependencia, pero no falla si no puede instalarla por requerimientos</dd>
                    <dd>El ejemplo más visto: 'fsevents'<br><small>SKIPPING OPTIONAL DEPENDENCY: Unsupported platform
                            for fsevents@1.0.14</small></dd>

                    <dt>bundledDependencies</dt>
                    <dd>Se deben empaquetar junto al código propio al hacer publish.</dd>
                </dl>
            </section>

            <section>
                <h2 class="mini">Clave 4: Elije bien el <span class="em">tipo de dependencia </span></h2>
                <ul class="">
                    <li>❗ Es SUPER IMPORTANTE cuando estás haciendo una librería</li>
                    <li>🟡 Es IMPORTANTE cuando estás haciendo una app Node.js</li>
                    <li>🟩 Puede ser IMPORTANTE cuando estás haciendo una web</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 5: Utiliza <span class="em">rangos de versiones</span></h2>
                <ul class="">
                    <li>📊 Hay un 99% de posibilidades de que no necesites una versión concreta de una dependencia</li>
                    <li>🔓 Explicitar versiones concretas en el package.json NO definirá todas tus dependencias de manera
                        determinista</li>
                    <li>🔺 Si haces una librería, intenta referenciar desde la versión mínima sin vulnerabilidades que
                        soporte la API que usas</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 5: Utiliza <span class="em">rangos de versiones</span></h2>

                <p class="mini">Formatos</p>
                <pre class="mini">

                            Caret ranges:
                                "^1.2.3"                Meaning: "&gt;=1.2.3 &lt;2.0.0"
                            Tilde ranges:
                                "~1.2.3"                Meaning: "&gt;=1.2.3 &lt;1.3.0"
                                "~1.2"                  Meaning: "&gt;=1.2.0 &lt;1.3.0"
                                "~1"                    Meaning: "&gt;=1.0.0 &lt;2.0.0"
                            X ranges:
                                "1.2.X"                 Meaning: "&gt;=1.2.0 &lt;1.3.0"
                                "1.X"                   Meaning: "&gt;=1.0.0 &lt;2.0.0"
                            Or ranges:
                                "^1.2.3 || ^2.4.1"      Meaning: "&gt;=1.2.3 &lt;2.0.0 || &gt;=2.4.1 &lt;3.0.0"

                </pre>
                <p class="mini"><a href="https://semver.npmjs.com/">Calculador Semver</a></p>
            </section>

            <section>
                <h2 class="mini">Clave 5: Utiliza <span class="em">rangos de versiones</span></h2>
                <p class="mini"> </p>

                <ul class="">
                    <li>Por defecto <pre class="inline npm">npm i</pre> <pre class="inline yarn">yarn add</pre> usa carets (^)</li>
                    <li>Los carets están bien en general</li>
                    <li><strong>¡OJO! 👇</strong> <br>Los carets son poco recomendables en versiones <pre class="inline">0.X.X</pre>,
                        mejor tilde (<pre class="inline">~0.2.3</pre>) o fija</li>
                </ul>
            </section>


            <section>
                <h2 class="mini">Clave 6: Usa <span class="em">Semantic versioning</span></h2>
                <div class="">
                    <img src="images/semver.png" width="200px">
                    <ul class="">
                        <li>🔴 Hazlo siempre, siempre, siempre que hagas librerías</li>
                        <li>📛 Tu API define la versión y no el marketing. Si rompes API, subes major.</li>
                        <li>🧑‍💻 La responsabilidad de los desarrolladores con esto es lo más importante para la estabilidad
                            del sistema.</li>
                        <li>↗ Empieza en la 1.0.0. Por favor, por favor, por favor...</li>
                    </ul>
                </div>
            </section>

            <section>
                <h2 class="mini">Clave 7: Versiona siempre tu <span class="em">lock file</span></h2>
                <ul class="">
                    <li>🔒 Este fichero define todas tus dependencias de manera determinista</li>
                    <li>📤 Haz commit siempre de este fichero.</li>
                    <li>📝 No se edita el fichero a mano</li>
                    <li>🗯 No se resuelven los conflictos a mano (npm-merge-driver)</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 7: Versiona siempre tu <span class="em">lock file</span></h2>
                <ul>
                    <li>El lock file no se publica con <pre class="inline npm">npm publish</pre> <pre class="inline yarn">yarn publish</pre> porque no se debe publicar</li>
                    <li>Solo tendría sentido publicar el lock file en una herramienta como una CLI. Para eso existe el
                        fichero <pre class="inline">npm-shrinkwrap.json</pre> (no soportado por yarn). También con cualquier paquete cuya intención sea ser
                        instalado de forma global.</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 8: <span class="em">Actualiza</span> con criterio</h2>
                <ul class="">
                    <li>🕐 Con <pre class="inline npm">npm outdated</pre> <pre class="inline yarn">yarn outdated</pre> puedes obtener información</li>
                    <li>🦠 Vigila las vulnerabilidades (obtén info con <pre class="inline npm">npm audit</pre> <pre class="inline yarn">yarn npm audit</pre>).</li>
                    <li>❓ <em>¿De verdad necesitas esa nueva funcionalidad?</em></li>
                    <li>🏃 <em>Ojo con la falta de soporte, esto va muy rápido</em></li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 8: <span class="em">Actualiza</span> con criterio</h2>
                <div class="">
                    <p>Actualizar solo una dependencia:</p>
                    <ul class="">
                        <li><strong><pre class="inline npm">npm update &lt;paquete&gt;</pre> <pre class="inline yarn">yarn upgrade &lt;paquete&gt;</pre></strong>
                            <br>
                            Actualizará el paquete respetando el package.json (puedes modificarlo previamente)
                        </li>
                        <li><strong><pre class="inline npm">npm install &lt;paquete&gt;@latest</pre> <pre class="inline yarn">yarn upgrade &lt;paquete&gt; --latest</pre></strong>
                            <br>
                            Actualizará el paquete a la última version
                        </li>
                    </ul>
                    <p>No olvides commitear el lock file.</p>
                </div>
            </section>

            <section>
                <h2 class="mini">Clave 8: <span class="em">Actualiza</span> con criterio</h2>
                <div class="">
                    <p>Como actualizar todas las dependencias:</p>
                    <p class="fragment">No lo hagas. Actualiza con criterio ;)</p>
                    <ol class="fragment">
                        <li>Identifica las dependencias desactualizadas <pre class="inline npm">npm outdated</pre> <pre class="inline yarn">yarn outdated</pre></li>
                        <li>Actualiza versiones en tu package.json si es necesario</li>
                        <li>Ejecuta <pre class="inline npm">npm update</pre> <pre class="inline yarn">yarn upgrade</pre></li>
                        <li>No olvides commitear el lock file.</li>
                    </ol>
                </div>

            </section>

            <section>
                <h2 class="mini">Clave 9: Usa <span class="em npm">npm ci</span> <span class="em yarn">yarn --frozen-lockfile</span></h2>
                <ul class="">
                    <li class="npm">🟫 A diferencia de <span class="em ">npm install</span>  solo instala proyectos enteros, no dependencias</li>
                    <li>🟨 Solo usa el <pre class="inline npm">package-lock.json</pre> <pre class="inline yarn">yarn.lock</pre>. <span class="npm">Se asegura de que está en control de versiones</span></li>
                    <li>🟩 Da error si el <pre class="inline npm">package-lock.json</pre> <pre class="inline yarn">yarn.lock</pre> no es coherente con el <pre class="inline">package.json</pre></li>
                    <li>🟦 Nunca actualiza los ficheros <pre class="inline">package.json</pre> o <pre class="inline npm">package-lock.json</pre> <pre class="inline yarn">yarn.lock</pre></li>
                    <li>🟪Imprescindible para CI</li>
                    <li class="npm">⬛ Borra el directorio <pre class="inline">node_modules</pre> si ya existe</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Clave 10: <span class="em">No</span> necesitas <span class="em2"><nobr>rm -rf node_modules && <span class="npm">npm i</span> <span class="yarn">yarn</span></nobr></span></h2>
                <ul class="">
                    <li>🔄 Era una operación demasiado habitual hasta que hubo lock file (reproducir fallos que sucedían en CI o a nuevos compis).</li>
                    <li>👃 A día de hoy, si necesitas hacerlo puedes tomarlo como un 'smell'. Probablemente hay algo que arreglar.</li>
                    <li>⛄ <pre class="inline npm">npm ci</pre> <pre class="inline yarn">yarn --frozen-lockfile</pre> debería ser suficiente y además haría comprobaciones.</li>
                    <li>🏗 <pre class="inline npm">npm rebuild</pre> <pre class="inline yarn">yarn rebuild</pre> es otra alternativa si por ejemplo has actualizado la verión de Node.js</li>
                </ul>
            </section>

            <section>
                <h2 class="mini">Las claves</h2>
                <ol class="">
                    <li>Utiliza <span class="em">scoped packages</span></li>
                    <li>Haz <span class="em">dependencias explícitas</span></li>
                    <li>Haz <span class="em">explícita tu versión de node</span></li>
                    <li>Elije bien el <span class="em">tipo de dependencia </span></li>
                    <li>Utiliza <span class="em">rangos de versiones</span></li>
                    <li>Usa <span class="em">Semantic versioning</span></li>
                    <li>Versiona siempre tu <span class="em">lock file</span></li>
                    <li><span class="em">Actualiza</span> con criterio</li>
                    <li>Usa <span class="em">npm ci</span></li>
                    <li><span class="em">No</span> necesitas <span class="em">rm -rf node_modules && npm i</span></li>
                </ol>
            </section>

            <section>
                <div>
                    <img data-src="images/eskerrik-asko.png" alt="Eskerrik asko!">
                </div>
                <p>
                    <small>Slides:
                        <a href="https://www.berriart.com/talks/dependencias-npm/">https://www.berriart.com/talks/dependencias-npm/</a>
                    </small>
                </p>

            </section>


            <section>
                <h2 class="mini">Webgrafía</h2>
                <ul class="mini">
                    <li><a href="https://depfu.com/blog/2017/03/22/a-brief-history-of-dependency-management">A brief
                            history of dependency management</a></li>
                    <li><a href="https://en.wikipedia.org">Wikipedia</a></li>
                    <li><a href="https://docs.npmjs.com/cli-documentation/cli">NPM CLI Documentation</a></li>
                </ul>
            </section>
        </div>

    </div>

    <script src="../dist/reveal.js"></script>
    <script src="../plugin/markdown/markdown.js"></script>
    <script src="../plugin/highlight/highlight.js"></script>
    <script src="../plugin/notes/notes.js"></script>
    <script src="../plugin/zoom/zoom.js"></script>

    <script>
        // More info https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: true,
            progress: true,
            history: true,
            center: true,
            //   showNotes: true,

            transition: 'slide', // none/fade/slide/convex/concave/zoom

            // More info https://github.com/hakimel/reveal.js#dependencies
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes, RevealZoom ]
        });

        document.addEventListener('keydown', function (e) {
            if (e.code === 'KeyZ') {
                document.documentElement.classList.toggle('yarn');
                document.documentElement.classList.toggle('npm');
            }
        });
    </script>

</body>

</html>
